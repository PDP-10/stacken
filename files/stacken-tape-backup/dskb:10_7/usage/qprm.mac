SUBTTL	Larry Samberg/LSS	12 Jul 74


;COPYRIGHT (C) 1974,1979 BY
;DIGITAL EQUIPMENT CORPORATION, MAYNARD, MASS.
;
;
;THIS SOFTWARE IS FURNISHED UNDER A LICENSE AND MAY BE USED AND COPIED
;ONLY  IN  ACCORDANCE  WITH  THE  TERMS  OF  SUCH LICENSE AND WITH THE
;INCLUSION OF THE ABOVE COPYRIGHT NOTICE.  THIS SOFTWARE OR ANY  OTHER
;COPIES THEREOF MAY NOT BE PROVIDED OR OTHERWISE MADE AVAILABLE TO ANY
;OTHER PERSON.  NO TITLE TO AND OWNERSHIP OF THE  SOFTWARE  IS  HEREBY
;TRANSFERRED.
;
;THE INFORMATION IN THIS SOFTWARE IS SUBJECT TO CHANGE WITHOUT  NOTICE
;AND  SHOULD  NOT  BE  CONSTRUED  AS A COMMITMENT BY DIGITAL EQUIPMENT
;CORPORATION.
;
;DIGITAL ASSUMES NO RESPONSIBILITY FOR THE USE OR RELIABILITY  OF  ITS
;SOFTWARE ON EQUIPMENT WHICH IS NOT SUPPLIED BY DIGITAL.

IF2,<IFE %.QPS2,<TAPE>>


;VERSION INFORMATION
	QPMVER==2	;MAJOR VERSION
	QPMMIN==0	;MINOR VERSION
	QPMEDT==14	;EDIT LEVEL
	QPMWHO==0	;WHO LAST PATCHED

	%%QPM==<BYTE (3)QPMWHO(9)QPMVER(6)QPMMIN(18)QPMEDT>

;This parameter file will be considered to  be  the  official
;definition  of  the QMANGR parameter area.  The symbol names
;and definitions used in this file supersede  all  previously
;issued  documentation.  All fields labeled 'Reserved to DEC'
;are subject to  change  without  notice,  and  the  user  is
;advised  not  to  assume that they will not be used, or that
;they contain zero.  To  ensure  upward  compatibility,  they
;should be set to zero.


IFNDEF	%.Q,<%.Q==0>	;IF USER DIDN'T DEFINE IT

;DEFINE %.Q AS FOLLOWS

;	-1	TO ASSEMBLE IN BOTH PASSES
;	-2	TO INCLUDE AN END STATEMENT
;	-3	TO ASSEMBLE AS A UNIVERSAL FILE

IF1,<
	%.QEND==0
	IFE %.Q+2,<%.QEND==1>
	IFE %.Q+3,<%.QEND==1>
	%.QPS2==0
	IFN %.Q,<%.QPS2==1>
>;END OF IF1


DEFINE .TITL.(V,E),<
	IFE %.Q+3,<
UNIVER	QPRM	Queue System Symbol Table  %'V(E)
>
	IFE %.Q+2,<
TITLE	QPRM	Queue System Symbol Definitions  %'V(E)
>>

	.TITL.(\QPMVER,\QPMEDT)
	PURGE	.TITL.
;       	TABLE OF CONTENTS FOR QPRM
;
;
;                          SECTION                            PAGE
;    1. Revision History......................................   3
;    2. Queue Independent Header..............................   4
;    3. Input Queue Header Extension..........................   6
;    4. Output Queue Header Extension.........................   7
;    5. File Specification Block..............................   8
;    6. Filespec MODIFY Block.................................   9
;    7. Paper Formats.........................................  10
;    8. Control, Log, and Output File Offsets.................  11
SUBTTL	Revision History

;1	CREATE	FILE
;2	INSERT FILE FORMATS
;3	INSERT CUSP NAMES AND CODES
;4	INSERT CONTROL AND LOG FILE OFFSETS
;5	INSERT PAPER FORMATS
;6	INSERT OFFSETS FOR FIRST FILE IN OUTPUT REQUEST
;7	INSERT /MODIFY EXTENSION TO FILESPEC BLOCK
;10	FIX SOME RANDOM BUGS AND ADD SOME MORE DOCUMENTATION
;11	CHANGE CUSP-NAME CODES FROM QO%XXX TO %QOXXX
;12	CHANGE PAPER FORMATS FROM QF%XYY TO %QFXYY
;13	MAKE THIS VERSION 2
;14	RE-DEFINE QF.SKP, AND DEFINE QF.IRP AND %QOFRS
SUBTTL	Queue Independent Header

	LOC 	0

Q.MEM:	BLOCK	1		;USED BY QMANGR
				;WHEN CALLED BY K-QUE, 
				;  0-17 CONTAIN ADDRESS OF NEWLOG ROUTINE
				; 18-35 CONTAIN ADDRESS OF CHARACTER TYPER
				;Q.MEM IS NOT WRITTEN INTO THE .QUE FILE
Q.OPR:	BLOCK	1		;REQUEST INFORMATION
	QO.SCH==777777B17	;ADDRESS OF SCHEDULER OR LISTER ROUTINE
	QO.VER==77B23		;PARAMTER AREA FORMAT VERSION NUMBER
	QO.CSP==77B29		;REQUESTING CUSP
		%QOQUE==1	;QUEUE
		%QOCDK==2	;CDRSTK
		%QOBTN==3	;BATCON
		%QOSPL==4	;SPOOL
		%QOBSC==5	;BASIC
		%QOCPD==6	;COPYED
		%QOSPT==7	;SPRINT
		%QOFRS==10	;FOROTS
	QO.ROP==77B35		;REQUESTED OPERATION
		.QORCR==1	;CREATE
		.QORDF==2	;DEFER
		.QORZD==3	;ZDEFER
		.QORLS==4	;LIST
		.QORMD==5	;MODIFY
		.QORKL==6	;KILL
		.QORSC==7	;SCHEDULE
		.QORRL==10	;RELEASE
		.QORRQ==11	;REQEUE
		.QORDL==12	;FAST LIST
		.QORCP==13	;CHECKPOINT
		.QORNX==14	;NEXT-JOB (RELEASE AND SCHEDULE)
Q.LEN:	BLOCK	1		;BLOCK LENGTHS
	QL.HLN==777B8		;LENGTH OF HEADER
	QL.FLN==777B17		;LENGTH OF A FILE SPEC
	QL.NFL==777777		;NUMBER OF FILES
Q.DEV:	BLOCK	1		;GENERIC DESTINATION DEVICE
	QD.GDN==777777B17	;GENERIC DEVICE NAME
	QD.PDS==777777		;PHYSICAL DEVICE SPEC
				;0 IF GENERIC
				;1-77 IF STATION
				;1000-1777 IF PHYSICAL


				;CONTINUED
Q.PPN:	BLOCK	1		;PPN OF USER
Q.JOB:	BLOCK	1		;JOB NAME
Q.SEQ:	BLOCK	1		;SEQUENCE NUMBER
Q.PRI:	BLOCK	1		;PRIORITY
				;;0-17 RESERVED TO CUSTOMER
	QP.PRO==777B26		;PROTECTION OF QUEUE REQUEST
				;;27-29 RESERVED TO DEC
	QP.PRI==77		;EXTERNAL PRIORITY

Q.PDEV:	BLOCK	1		;PROCESSING DEVICE
Q.TIME:	BLOCK	1		;START TIME OF JOB
Q.CREA:	BLOCK	1		;CREATION TIME OF JOB
Q.AFTR:	BLOCK	1		;AFTER PARAMETER
Q.DEAD:	BLOCK	1		;DEADLINE PARAMTER
	QT.REL==1B0		;IF QT.REL IS SET IN ANY OF Q.TIME,
				; Q.CREA,Q.AFTR OR Q.DEAD, THE TIME
				; IS RELATIVE TO CURRENT TIME
Q.CNO:	BLOCK	1		;CHARGE NUMBER
Q.USER:	BLOCK	2		;USERS NAME (2 WORDS)




;;On MODIFY request:
;;	Q.TIME contains PPN mask
;;	Q.CREA contains Job Name mask

	LOC	Q.TIME
Q.PPNM:	BLOCK	1

	LOC	Q.CREA
Q.JOBM:	BLOCK	1
SUBTTL	Input Queue Header Extension

	LOC	Q.USER+2

;;   !                         ---FORMAT OF Q.IDEP---                          !
;;   !-------------------------------------------------------------------------!
;;   !N !UNI !P!   ! OUT !                 !DMT!        DEPENDENCY             !
;;   !-------------------------------------------------------------------------!


Q.IDEP:	BLOCK	1		;DEPENDENCY WORD
	QI.NRS==1B0		;NO-RESTART BIT
	QI.UNI==3B2		;UNIQUENESS
		.QIUNO==0	;NO UNIQUENESS
		.QIUYS==1	;UNIQUE PPN
		.QIUSD==2	;UNIQUE SUB-DIRECTORY (SFD)
	QI.PAB==1B3		;PRE-ABORTTED OR ILLEGAL RESTART
	QI.MNR==1B3		;ON MODIFY, MODIFY QI.NRS
				;;4-5 RESERVED TO DEC
	QI.OUT==7B8		;/Z PARAMTER TO KJOB
		.QIONO==0	;/Z:0  NO AUTO-QUEUEING
		.QIOLG==1	;/Z:1  QUEUE THE LOG
		.QIOSP==2	;/Z:2  QUEUE ALL SPOOLED FILES AND LOG
		.QIOLS==3	;/Z:3  /Z:2 + *.LST
		.QIOAL==4	;/Z:4  /Z:3 + ALL DEFERED FILES
				;;9-17 RESERVED TO DEC
	QI.DMT==3B19		;DEPENDENCY MODIFY TYPE
		.QIDAB==0	;ABSOLUTE
		.QIDPL==1	;PLUS (ADDITIVE)
		.QIDMI==2	;MINUS
		.QIDNM==3	;NO MODIFY
	QI.DEP==177777		;DEPENDENCY PARAMETER
Q.ILIM:	BLOCK	1		;CORE AND TIME LIMITS
	QM.COR==777777B17	;CORE LIMIT IN WORDS
	QM.TIM==777777		;CPU TIME LIMIT IN SECONDS
Q.ILM2:	BLOCK	1		;LPT AND CDP LIMITS
	QM.LPT==777777B17	;LPT LIMIT (PAGES)
	QM.CDP==777777		;CDP LIMIT (CARDS)
Q.ILM3:	BLOCK	1		;PTP AND PLT LIMITS
	QM.PTP==777777B17	;PTP LIMIT (FEET)
	QM.PLT==777777		;PLOT LIMIT (MINUTES)
Q.IDDI:	BLOCK	6		;FULL PATH TO DEFAULT DIRECTORY


	.QIHED==.-Q.OPR		;LENGTH OF INPUT QUEUE HEADER
SUBTTL	Output Queue Header Extension

	LOC	Q.USER+2

Q.OFRM:	BLOCK	1		;FORMS TYPE
Q.OSIZ:	BLOCK	1		;REQUEST SIZE
	QS.LIM==777777B17	;LIMIT
	QS.BLK==777777		;BLOCKS * COPIES (UNITS OF 8 BLOCKS)
Q.ONOT:	BLOCK	2		;ANNOTATION  (2 WORDS)


	.QOHED==.-Q.OPR		;LENGTH OF OUTPUT QUEUE HEADER
SUBTTL	File Specification Block

	LOC	0

Q.FSTR:	BLOCK	1		;FILE STRUCTURE
Q.FDIR:	BLOCK	6		;FULL PATH TO FILE
Q.FNAM:	BLOCK	1		;FILE NAME
Q.FEXT:	BLOCK	1		;EXTENSION
	QE.EXT==777777B17	;EXTENSION
				;;18-35 RESERVED TO CUSTOMER
Q.FRNM:	BLOCK	1		;RENAMED NAME (QUE:.QUD[,])
Q.FBIT:	BLOCK	1		;START PARAMETER
	QB.APF==1B0		;ARTIFICIALLY PRESERVED FILE
	QB.TAG==7777777777	;5 CHARACTER (6BIT) TAG FOR BATCON
	QB.SLN==777777		;STARTING LINE NUMBER
				;THE OUTPUT SPOOLERS ALWAYS USE BITS
				; 18-35 AS A STARTING LINE NUMBER
				; IF BITS 6-11 ARE ZERO, BATCON USES
				; 18-35 AS A START LINE NUMBER, ELSE
				; 6-35 ARE A START TAG.


;;   !                         ---FORMAT OF Q.FMOD---                          !
;;   !-------------------------------------------------------------------------!
;;   !I !L !D!   !S!N!R!                   ! SPC ! PFM ! FFM ! DSP !  COPIES   !
;;   !-------------------------------------------------------------------------!


Q.FMOD:	BLOCK	1		;STATUS BITS
	QF.IRP==1B0		;INDIRECT REQUEST POINTER
	QF.LOG==1B1		;THIS IS THE LOG FILE
	QF.DEF==1B2		;FILE DOES NOT YET EXIST
				;;3 RESERVED TO DEC
	QF.SKP==1B4		;SKIP THIS FILE
	QF.NFH==1B5		;NO FILE HEADERS WANTED
	QF.RVC==1B6		;RESTARTED VIA CHKPNT OR REQUE
				;;7-17 RESERVED TO DEC
	QF.SPC==7B20		;SPACING CODE
	QF.PFM==7B23		;PAPER FORMAT (SEE SEPARATE SECTION)
	QF.FFM==7B26		;FILE FORMAT
		.QFFAS==1	;ASCII
		.QFFFO==2	;FORTRAN
		.QFFCO==3	;COBOL
		.QFFCR==4	;CREF
		.QFFRU==5	;RUNOFF
		.QFF11==6	;ELEVEN (PDP-11 PAPER TAPE FORMAT)
	QF.DSP==7B29		;DISPOSITION
		.QFDPR==1	;PRESERVE
		.QFDRE==2	;RENAME
		.QFDDE==3	;DELETE
	QF.COP==77B35		;NUMBER OF COPIES
Q.FRPT:	BLOCK	2		;REPORT SPECIFICATION (2 WORDS)
SUBTTL	Filespec MODIFY Block

	LOC	0

;The filespec MODIFY block is tacked on the end  of
;the  filespec  during  a  modify  request.   It is
;defined  here  as  0-origin  since  it  may  start
;following  Q.FMOD or Q.FRPT+1 depending on whether
;it is queue format version 0 or 1.

Q.FDRM:	BLOCK	6		;DIRECTORY MASK
Q.FNMM:	BLOCK	1		;FILENAME MASK
Q.FEXM:	BLOCK	1		;FILENAME EXTENSION MASK
	QF.EXM==777777B17	;FILENAME EXTENSION
				;;18-35 RESERVED TO CUSTOMER
Q.FMDM:	BLOCK	1		;MODIFIER MASK
SUBTTL	Paper Formats

;The  PAPER FORMAT field consists of bits 21, 22, 23 of
;Q.FMOD.  This field is generated by the /PRINT, /PUNCH
;/PLOT, and /TAPE switches to QUEUE.


;PAPER FORMATS FOR LPT QUEUE (/PRINT)
	%QFLAR==1		;ARROW FORMAT
	%QFLAS==2		;ASCII FORMAT
	%QFLOC==3		;OCTAL FORMAT
	%QFLSU==4		;SUPPRESS FORMAT


;PAPER FORMATS FOR PTP QUEUE (/TAPE)
	%QFTAS==1		;ASCII FORMAT
	%QFTIM==2		;IMAGE FORMAT
	%QFTIB==3		;IMAGE BINARY FORMAT
	%QFTBI==4		;BINARY FORMAT


;PAPER FORMATS FOR CDP QUEUE (/PUNCH)
	%QFCAS==1		;ASCII FORMAT
	%QFCBC==2		;026 (BCD) FORMAT
	%QFCBI==3		;BINARY FORMAT
	%QFCIM==5		;IMAGE FORMAT


;PAPER FORMAT FOR PLT QUEUE  (/PLOT)
	%QFPIM==1		;IMAGE FORMAT
	%QFPAS==2		;ASCII FORMAT
	%QFPBI==3		;BINARY FORMAT
SUBTTL	Control, Log, and Output File Offsets

	LOC	.QIHED+1


;	CONTROL FILE OFFSETS

Q.CSTR:	BLOCK	1		;FILE-STRUCTURE
Q.CDIR:	BLOCK	6		;DIRECTORY
Q.CNAM:	BLOCK	1		;FILE NAME
Q.CEXT:	BLOCK	1		;EXTENSION
Q.CRNM:	BLOCK	1		;RENAMED NAME
Q.CBIT:	BLOCK	1		;START PARAMETER
Q.CMOD:	BLOCK	1		;STATUS BITS



;	LOG FILE OFFSETS

Q.LSTR:	BLOCK	1		;FILE STRUCTURE
Q.LDIR:	BLOCK	6		;DIRECTORY
Q.LNAM:	BLOCK	1		;FILENAME
Q.LEXT:	BLOCK	1		;EXTENSION
Q.LRNM:	BLOCK	1		;RENAMED NAME
Q.LBIT:	BLOCK	1		;START PARAMETER
Q.LMOD:	BLOCK	1		;STATUS BITS



;	OFFSETS FOR FIRST FILE IN AN OUTPUT REQUEST

	LOC	.QOHED+1

Q.OSTR:	BLOCK	1		;FILE STRUCTURE
Q.ODIR:	BLOCK	6		;DIRECTORY
Q.ONAM:	BLOCK	1		;FILE NAME
Q.OEXT:	BLOCK	1		;EXTENSION
Q.ORNM:	BLOCK	1		;RENAMED NAME
Q.OBIT:	BLOCK	1		;START PARAMETER
Q.OMOD:	BLOCK	1		;STATUS BITS
	RELOC	0
	LOC	0

	PURGE	QPMVER,QPMMIN,QPMEDT,QPMWHO,%%QPM

IF1,<ASUPPRESS>

IFN %.QEND,<
	IF2,<PURGE   %.Q,%.QEND,%.QPS2>
	END
>

IFE %.QEND,<
	IF2,<PURGE   %.Q,%.QEND,%.QPS2>
>
